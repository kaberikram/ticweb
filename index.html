<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TIC Corp.</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="icon" type="image/png" href="/ticLOGO.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">

    <meta name="description" content="BEST RAT TEES ON THE INTERNET.">
    <link rel="canonical" href="https://www.laughwithtic.com/" />

    <!-- Open Graph / Facebook Meta Tags -->
    <meta property="og:title" content="TIC Corp.">
    <meta property="og:description" content="BEST RAT TEES ON THE INTERNET.">
    <meta property="og:image" content="https://www.laughwithtic.com/previewImage.jpg">
    <meta property="og:url" content="https://www.laughwithtic.com/">
    <meta property="og:type" content="website">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="TIC Corp.">
    <meta name="twitter:description" content="BEST RAT TEES ON THE INTERNET.">
    <meta name="twitter:image" content="https://www.laughwithtic.com/previewImage.jpg">
    
    <style>
        .tv-container {
            position: relative;
            margin: 0 auto;
            width: 100%;
            max-width: 448px; /* 80% of original 560px */
            cursor: pointer;
        }
        
        .tv-frame {
            width: 100%;
            height: auto;
            position: relative;
            z-index: 2;
            pointer-events: none;
        }
        
        .tv-gif {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            object-fit: cover;
            pointer-events: none;
        }
        
        .play-button {
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 72px; /* Increased from 60px by 20% */
            height: 72px; /* Increased from 60px by 20% */
            background-color: rgba(0, 0, 0, 0.6);
            border-radius: 50%;
            z-index: 3;
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: none;
            animation: pulse 1.5s infinite;
        }
        
        .play-button:after {
            content: '';
            display: block;
            width: 24px; /* Fixed width for the rounded triangle */
            height: 24px; /* Fixed height for the rounded triangle */
            border-radius: 3px; /* Rounded corners */
            background-color: white;
            clip-path: polygon(0 0, 0 100%, 100% 50%); /* Triangle shape with rounded corners */
            margin-left: 4px; /* Adjust to center visually */
        }
        
        @keyframes pulse {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1);
                opacity: 0.8;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }
        
        .rattire-button-container {
            margin-top: 40px; /* Add space between TV and button */
        }
        
        /* Mobile responsiveness */
        @media (max-width: 480px) {
            .tv-container {
                max-width: 358px;
                width: 90%;
                margin-left: auto;
                margin-right: auto;
            }
            
            .play-button {
                width: 60px; /* Increased from 50px by 20% */
                height: 60px; /* Increased from 50px by 20% */
            }
            
            .play-button:after {
                width: 20px; /* Smaller for mobile */
                height: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Content will be added here -->
    <div class="main-content">
        <img src="/ticLOGO.png" alt="TIC Logo" class="index-logo">
        
        <div class="tv-container" id="tvContainer">
            <img src="/tv.gif" alt="TV Content" class="tv-gif">
            <img src="/tvFrame.png" alt="TV Frame" class="tv-frame">
            <div class="play-button"></div>
        </div>
        
        <!-- Slide to Buy Container -->
        <div id="slide-to-buy-container">
            <div id="slider-fill"></div>
            <div id="slider-handle">&gt;</div>
            <span class="slider-text">Slide to enter</span>
        </div>
        <!-- End Slide to Buy Container -->
    </div>

    <!-- Video Overlay -->
    <div id="videoOverlay" class="video-overlay">
        <div class="video-overlay-content">
            <button id="closeVideoOverlay" class="video-overlay-close">&times;</button>
            <iframe id="youtubeVideo" width="560" height="315" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        </div>
    </div>
    <!-- End Video Overlay -->

    <script type="module" src="/index.js"></script>
    <script>
        // Add click event listener to the TV container to preserve YouTube preview functionality
        document.getElementById('tvContainer').addEventListener('click', function() {
            // This assumes the original click handler was looking for a click on the TV frame
            // If index.js was handling this differently, you may need to update that file instead
            const videoOverlay = document.getElementById('videoOverlay');
            const youtubeVideo = document.getElementById('youtubeVideo');
            
            // Set the YouTube video source with the provided URL
            youtubeVideo.src = 'https://www.youtube.com/embed/QbNcKrUaLs0?si=h1010M_WYKn-ztuM&controls=0&autoplay=1';
            
            videoOverlay.style.display = 'flex';
        });
        
        // Close video overlay when close button is clicked
        document.getElementById('closeVideoOverlay').addEventListener('click', function() {
            const videoOverlay = document.getElementById('videoOverlay');
            const youtubeVideo = document.getElementById('youtubeVideo');
            
            videoOverlay.style.display = 'none';
            youtubeVideo.src = '';  // Reset video source to stop playback
        });

        // Slider functionality
        const sliderContainer = document.getElementById('slide-to-buy-container');
        const sliderHandle = document.getElementById('slider-handle');
        const sliderFill = document.getElementById('slider-fill');
        let isDragging = false;
        let startX = 0;
        let currentX = 0;

        if (sliderHandle) {
            sliderHandle.addEventListener('mousedown', (e) => {
                isDragging = true;
                startX = e.clientX;
                sliderContainer.classList.add('dragging'); // Add class for visual feedback
                document.addEventListener('mousemove', onMouseMove);
                document.addEventListener('mouseup', onMouseUp);
            });

            // Touch events for mobile
             sliderHandle.addEventListener('touchstart', (e) => {
                isDragging = true;
                startX = e.touches[0].clientX;
                sliderContainer.classList.add('dragging');
                document.addEventListener('touchmove', onTouchMove, { passive: false }); // Use passive: false to prevent scrolling
                document.addEventListener('touchend', onTouchEnd);
            }, { passive: true }); // Allow default touch behavior initially
        } else {
            console.error("Slider handle not found");
        }


        function onMouseMove(e) {
            if (!isDragging) return;
            handleMove(e.clientX);
        }

        function onTouchMove(e) {
            if (!isDragging) return;
            // Prevent page scroll while dragging slider
             if (e.cancelable) e.preventDefault();
            handleMove(e.touches[0].clientX);
        }

        function handleMove(clientX) {
            currentX = clientX - startX;
            const containerWidth = sliderContainer.offsetWidth;
            const handleWidth = sliderHandle.offsetWidth;
            const maxTranslateX = containerWidth - handleWidth;

            // Clamp the translation within the container bounds
            let translateX = Math.max(0, Math.min(currentX, maxTranslateX));

            sliderHandle.style.transform = `translateX(${translateX}px)`;
            sliderFill.style.width = `${translateX + handleWidth / 2}px`; // Adjust fill width

            // Check if slider reached the end
            if (translateX >= maxTranslateX - 5) { // Use a small threshold
                completeSlideAction();
            }
        }

        function onMouseUp() {
            if (!isDragging) return;
            isDragging = false;
            sliderContainer.classList.remove('dragging');
            resetSlider();
            document.removeEventListener('mousemove', onMouseMove);
            document.removeEventListener('mouseup', onMouseUp);
        }

         function onTouchEnd() {
            if (!isDragging) return;
            isDragging = false;
            sliderContainer.classList.remove('dragging');
            resetSlider();
            document.removeEventListener('touchmove', onTouchMove);
            document.removeEventListener('touchend', onTouchEnd);
        }

        function resetSlider() {
             // Only reset if not completed
            const containerWidth = sliderContainer.offsetWidth;
            const handleWidth = sliderHandle.offsetWidth;
            const maxTranslateX = containerWidth - handleWidth;
            const currentTranslateX = parseFloat(sliderHandle.style.transform.replace('translateX(', '').replace('px)', '')) || 0;

            if (currentTranslateX < maxTranslateX - 5) {
                sliderHandle.style.transition = 'transform 0.3s ease, width 0.3s ease';
                sliderFill.style.transition = 'width 0.3s ease';
                sliderHandle.style.transform = 'translateX(0px)';
                sliderFill.style.width = `${handleWidth / 2}px`; // Reset fill width

                // Remove transition after animation
                setTimeout(() => {
                    sliderHandle.style.transition = '';
                    sliderFill.style.transition = '';
                }, 300);
            }
        }

        function completeSlideAction() {
            console.log('Slide complete!');
            // Add fade-out class to body
            document.body.classList.add('fade-out');
            
            // Keep slider at the end visually after completion (optional)
            const containerWidth = sliderContainer.offsetWidth;
            const handleWidth = sliderHandle.offsetWidth;
            sliderHandle.style.transform = `translateX(${containerWidth - handleWidth}px)`;
            sliderFill.style.width = `${containerWidth}px`;

            // Prevent further interaction after completion if needed
            isDragging = false; // Ensure dragging stops
            document.removeEventListener('mousemove', onMouseMove);
            document.removeEventListener('mouseup', onMouseUp);
            document.removeEventListener('touchmove', onTouchMove);
            document.removeEventListener('touchend', onTouchEnd);

            // Delay navigation to allow fade-out animation
            setTimeout(() => {
                window.location.href = '/characterSelection.html';
            }, 500); // Match the transition duration (0.5s)
        }
    </script>
    <script>
      // Add hover logging for debugging
      const rattireButton = document.querySelector('.rattire-button');
      if (rattireButton) {
        rattireButton.addEventListener('mouseenter', function() {
          console.log('Mouse entered rattire-button');
        });
        rattireButton.addEventListener('mouseleave', function() {
          console.log('Mouse left rattire-button');
        });
      } else {
        console.error('Could not find .rattire-button element');
      }
    </script>

</body>
</html> 